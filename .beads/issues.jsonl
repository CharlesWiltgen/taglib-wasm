{"id":"taglib-wasm-1x6","title":"Fix worker type checking context","description":"Workers fail deno check because they're type-checked in window/DOM context instead of worker context. Need to isolate worker imports from DOM-dependent code or add /// \u003creference lib=\"webworker\" /\u003e directives.","status":"open","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:52.846167-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:52.846167-08:00"}
{"id":"taglib-wasm-2pu","title":"Create build/build-eh-sysroot.sh script","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:07.308375-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:30:44.522644-08:00","closed_at":"2026-02-09T15:30:44.522644-08:00","close_reason":"Closed"}
{"id":"taglib-wasm-2xw","title":"Add missing sidecar test coverage","description":"Add tests for: process crash mid-operation, malformed MessagePack responses, concurrent operations, shutdown during active operation, large responses.","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:47.415872-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:47.415872-08:00","dependencies":[{"issue_id":"taglib-wasm-2xw","depends_on_id":"taglib-wasm-s3m","type":"blocks","created_at":"2026-02-09T12:27:01.076368-08:00","created_by":"Charles Wiltgen"}]}
{"id":"taglib-wasm-6j9","title":"Research in-process filesystem access (jco, Wasmer SDK, custom imports)","description":"Evaluate approaches to replace sidecar subprocess with in-process filesystem access.\n\n## Approaches to evaluate\n\n### 1. jco + WASI 0.2 Component Model (primary)\n- Jco 1.0 released, production-ready (Bytecode Alliance)\n- WASI 0.2 with real filesystem via preview2-shim\n- Node.js lacks native WASI P2, so jco is the practical JS path\n- Prototype: compile taglib_wasi.wasm as WASI component, transpile with jco\n- Test filesystem access in Node.js and Deno\n\n### 2. Wasmer @wasmer/sdk with WASIX (alternative)\n- Can mount real host directories (unlike @wasmer/wasi which only has MemFS)\n- Previous attempt used wrong package (@wasmer/wasi) — @wasmer/sdk is the correct one\n- Note: security concerns around sandbox bypass (GHSA-55f3-3qvg-8pv5)\n\n### 3. Custom host functions (simplest)\n- Skip WASI filesystem entirely\n- Expose read_file(path)/write_file(path, bytes) as Wasm imports\n- Essentially an in-process version of what sidecar does\n- Lowest complexity, most control, but non-standard\n\n## Success criteria\n- In-process (no subprocess)\n- Real filesystem access (not MemFS)\n- Works in Node.js and Deno\n- Latency competitive with sidecar approach","notes":"ADR written: docs/development/adr-local-filesystem-access.md","status":"closed","priority":1,"issue_type":"feature","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:41.001732-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T13:13:49.84577-08:00","closed_at":"2026-02-09T13:13:49.84577-08:00","close_reason":"Implemented in-process WASI host with real filesystem syscalls. loadWasiHost() provides path-based and buffer-based access."}
{"id":"taglib-wasm-bcu","title":"Document memory management patterns","description":"Document what happens without dispose(), best practices for long-running apps, memory usage patterns. Add to docs/ directory.","status":"open","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:54.535444-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:54.535444-08:00"}
{"id":"taglib-wasm-d09","title":"Implement proper Wasm memory management","description":"Audit all _malloc() usage. Add try-finally blocks for _free(). Migrate to RAII pattern with WasmAlloc/WasmArena using 'using' statements per project rules. Affected files: taglib.ts, workers.ts.","status":"open","priority":0,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:51.775499-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:51.775499-08:00","dependencies":[{"issue_id":"taglib-wasm-d09","depends_on_id":"taglib-wasm-uxn","type":"blocks","created_at":"2026-02-09T12:27:01.926414-08:00","created_by":"Charles Wiltgen"}]}
{"id":"taglib-wasm-dcr","title":"Fix package author information","description":"package.json has placeholder author info. Update with correct details.","status":"open","priority":4,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:55.715643-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:55.715643-08:00"}
{"id":"taglib-wasm-gqm","title":"Clean up stubs, docs, and memory files","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:12.443559-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:37:04.285032-08:00","closed_at":"2026-02-09T15:37:04.285032-08:00","close_reason":"Closed","dependencies":[{"issue_id":"taglib-wasm-gqm","depends_on_id":"taglib-wasm-ss1","type":"blocks","created_at":"2026-02-09T15:29:17.868423-08:00","created_by":"Charles Wiltgen"}]}
{"id":"taglib-wasm-nj0","title":"Update build scripts for WASI SDK 30","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:08.473985-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:30:44.58087-08:00","closed_at":"2026-02-09T15:30:44.58087-08:00","close_reason":"Closed"}
{"id":"taglib-wasm-s3m","title":"Harden sidecar — fix critical/high code review issues","description":"Fix 6 issues from code review: (1) Add try-finally in wasmtime-sidecar.ts #sendRequest()/#receiveResponse(), (2) Add path traversal validation in taglib_sidecar.c, (3) Fix buffer accumulation in #readExact() (pre-allocate from length prefix), (4) Add mutex/state machine for shutdown race condition, (5) Wrap setSidecarConfig() shutdown in try-finally, (6) Add max length validation for mpack strings in C.","status":"closed","priority":1,"issue_type":"bug","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:45.173216-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T13:13:51.046143-08:00","closed_at":"2026-02-09T13:13:51.046143-08:00","close_reason":"C shim now supports path-based access. WASI stubs updated for new binary signatures. Sidecar binary rebuilt with path_open imports."}
{"id":"taglib-wasm-ss1","title":"Refactor taglib_shim.cpp to use FileRef","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:10.785164-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:32:35.55565-08:00","closed_at":"2026-02-09T15:32:35.55565-08:00","close_reason":"Closed","dependencies":[{"issue_id":"taglib-wasm-ss1","depends_on_id":"taglib-wasm-yi4","type":"blocks","created_at":"2026-02-09T15:29:17.594843-08:00","created_by":"Charles Wiltgen"}]}
{"id":"taglib-wasm-uxn","title":"Split oversized source files","description":"src/taglib.ts (1229 lines, limit 250), src/types.ts (639 lines), src/errors.ts (264 lines). Extract interfaces, metadata mapping, error classes into separate modules. Must maintain public API compatibility.","status":"open","priority":0,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T12:26:49.067135-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T12:26:49.067135-08:00"}
{"id":"taglib-wasm-yi4","title":"Update build-wasi.sh for EH sysroot","status":"closed","priority":2,"issue_type":"task","owner":"charles@wiltgen.net","created_at":"2026-02-09T15:29:09.509712-08:00","created_by":"Charles Wiltgen","updated_at":"2026-02-09T15:31:49.707417-08:00","closed_at":"2026-02-09T15:31:49.707417-08:00","close_reason":"Closed","dependencies":[{"issue_id":"taglib-wasm-yi4","depends_on_id":"taglib-wasm-nj0","type":"blocks","created_at":"2026-02-09T15:29:17.316665-08:00","created_by":"Charles Wiltgen"}]}
